\RequirePackage[l2tabu,orthodox]{nag} % Раскомментировав, можно в логе получать рекомендации относительно правильного использования пакетов и предупреждения об устаревших и нерекомендуемых пакетах
\documentclass[a4paper, oneside, 12pt]{article}

%-----------------------------------------------------------------------
\usepackage{geometry} % настройки полей документа
\geometry{a4paper,top=2cm,bottom=2cm,left=2.5cm,right=1cm}
\setlength{\topskip}{0pt}   %размер дополнительного верхнего поля
\setlength{\footskip}{12.3pt} % снимет warning, согласно https://tex.stackexchange.com/a/334346

\usepackage[main=russian,english, provide=*]{babel}   %% загружает пакет многоязыковой вёрстки
\usepackage{fontspec}      %% подготавливает загрузку шрифтов Open Type, True Type и др.
\defaultfontfeatures{Ligatures={TeX}}  %% свойства шрифтов по умолчанию. Для XeTeX опцию Renderer=Basic можно не указывать, она необходима для LuaTeX
\setmainfont{CMU Serif} %% задаёт основной шрифт документа
\setsansfont{CMU Sans Serif}                    %% задаёт шрифт без засечек
\setmonofont{CMU Typewriter Text} 

%%% Интервалы %%%
\usepackage[onehalfspacing]{setspace} % Опция запуска пакета правит не только интервалы в обычном тексте, но и формульные
\usepackage{needspace}
\usepackage{cite}
\usepackage{lastpage}

\usepackage{tocloft}
\setcounter{tocdepth}{3}


\usepackage{indentfirst} % отступ для первой строки абзаца
\usepackage{hyperref} % подключаем hyperref (для ссылок внутри  pdf)
\hypersetup{
    colorlinks=true,
    linkcolor=blue,
    filecolor=magenta,      
    urlcolor=cyan,
    pdftitle={Osipov Thesis},
    pdfpagemode=FullScreen,
    }
\usepackage[multiple]{footmisc} % сноски через запятую

\ifdefined\showlabels
	\usepackage[leqno]{amsmath}
\else
	\usepackage{amsmath}
\fi

\usepackage{amsfonts}
\usepackage{amssymb}

\usepackage{graphicx}
\usepackage{psfrag}
\usepackage{pgfplots}
\usepackage{caption}
\usepackage[labelformat = parens,labelsep = colon]{subcaption}
\renewcommand\thesubfigure{\Roman{subfigure}}
\usepackage{todonotes}
\usepackage{algorithm2e}
\renewcommand{\algorithmcfname}{Алгоритм}


\usepackage{fancyhdr} % Подключение пакета для работы с заголовками и колонтитулами
\usepackage{xcolor} % Подключение пакета для работы с цветом

\usepackage{tabularx}
 \newcolumntype{Y}{>{\raggedright\arraybackslash--- \ }X}



\fancyhf{} % Очистка заголовков и колонтитулов
\ifdefined\showlabels
\fancyfoot[L]{\color{gray}\textbf{2026-01-15--16-22-13}} % Добавление текста в правый колонтитул
\fi
% \fancyfoot[R]{\color{gray}\textbf{\gitversion}} % Добавление текста в правый колонтитул
\fancyfoot[C]{\thepage} % Сохранение номера страницы в центре колонтитула
\renewcommand{\headrulewidth}{0pt} % Удаление линии заголовка
\pagestyle{fancy} % Применение настроек к каждой странице

\usepackage{totcount} % Подключаем пакет для подсчёта общего значения
\newcounter{bibcount} % Ваш счётчик
\regtotcounter{bibcount} % Регистрируем его для totcount

\let\oldbibitem\bibitem
\renewcommand{\bibitem}[1]{\stepcounter{bibcount}\oldbibitem{#1}}


\usepackage{subfiles} % ЗBest loaded last in the preamble
\ifdefined\showlabels
    \usepackage{showkeys}
    \usepackage{seqsplit}
    \renewcommand*\showkeyslabelformat[1]{%
	    \fbox{%
		    \begin{minipage}[t]{19mm}
			    \raggedright
			    \normalfont\tiny\ttfamily\seqsplit{#1}
		    \end{minipage}%
	    }%
}
\fi
%\usepackage{refcheck}


\newtheorem{theorem}{Теорема} % задаём выводимое слово (для теорем)
\newtheorem{definition}{Определение} % задаём выводимое слово (для определений)
\newtheorem{lemma}{Лемма}
\newtheorem{utv}{Утверждение}
\newtheorem{assumption}{Предположение}
\newtheorem{zam}{Замечание}
\newtheorem{cond}{Условие}
\newtheorem{property}{Свойство}
\newtheorem{pr}{Пример}
\newtheorem{corollary}{Следствие}
\newcommand{\doc}{\mbox{Д о к а з а т е л ь с т в о. }}
\newcommand*\rfrac[2]{{}^{#1}\!/_{#2}}
\newcommand{\frc}[2]{\raisebox{2pt}{$#1$}\big/\raisebox{-3pt}{$#2$}}    % a/b, a выше, b ниже
\newcommand{\hrefdoi}[1]{\href{https://doi.org/#1}{DOI:~#1}}

\renewcommand{\theequation}{\arabic{section}.\arabic{equation}}
\hyphenation{непрерывно-диф-фе-рен-ци-ру-е-мы-ми}
\hyphenation{нуль-у-пра-вля-ем-ост-и}
\hyphenation{со-от-вет-ству-ю-ща-я}

%-----------------------------------------------------------------------

\begin{document}
    \subfile{dissertation_sections/title}
    \setcounter{page}{2} % Устанавливаем номер страницы после титульной
    
    \tableofcontents % Вывод содержания
    
    \subfile{dissertation_sections/introduction}
    \subfile{dissertation_sections/NotationList}

    \subfile{dissertation_sections/section1}

    \setcounter{equation}{0}
    \subfile{dissertation_sections/subsection21}
    \subfile{dissertation_sections/subsection22}
    
    \setcounter{equation}{0}
    \subfile{dissertation_sections/section3}
	
	\clearpage
    \subfile{common_sections/conclusion}
    
    \subfile{dissertation_sections/biblio}
    \subfile{dissertation_sections/appendix_A}
    \subfile{dissertation_sections/appendix_B}
\end{document}